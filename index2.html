<!DOCTYPE html>
<html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Virtual Background Example</title>
  <link href="./dist/build/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="./index.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <style>
    #canvas {
      margin: 20px;
      border: 2px solid gray;
      width: 80%;
      height: auto;
      background-image: url(./backgrounds/back1.jpg);
      background-position: center bottom;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: -100;
    }
  </style>
</head>
<script>
  navigator.mediaDevices.enumerateDevices().then(function (devices) {
    console.log(devices);
    for (var i = 0; i < devices.length; i++) {
      var device = devices[i];
      if (device.kind === 'videoinput') {
        var option = document.createElement('option');
        option.value = device.deviceId;
        option.text = device.label || 'camera ' + (i + 1);
        document.querySelector('select#videoSource').appendChild(option);
      }
    };
  });

</script>

<body>
  <div class="container-fluid">
    <div class="row thin-gutters align">
      <div class="col-sm-9">
        <div class="card video-container">
          <div class="card-block">
            <h4 class="card-title">Local Video</h4>
            <button id="playvid" onclick="playvid()" class="btn btn-primary btn-sm">Webcam</button>
            <button id="stopvid" class="btn btn-primary btn-sm">Stop</button>
            <select id="videoSource"></select>
            <select id="scaleCanvas">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
            </select>
            <br>
            <!-- <video height="600px" width="600px"></video> -->
            <canvas id="canvas"></canvas>
            <video id="video-input" style="display:none"></video>
            <div class="overlay" id="overlay"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-3 left-form">
        <div class="card">
          <div class="card-block">
            <form id="virtualBackground-Form">
              <!-- <div class="form-group">
                    <label for="maskBlurRadius">Mask Blur Radius</label>
                    <input class="form-control" type="number" min="0" oninput="validity.valid||(value='');" id="maskBlurRadius" value="5" ></input>
                  </div> -->

              <label for="backgroundImage">Background Image</label>

              <br>
              <div class="row">
                <div class="columnimg">
                  <img src="./backgrounds/back1.jpg" onclick="setSelectBackground('back1')" style="width:100%">
                </div>
                <div class="columnimg">
                  <img src="./backgrounds/back2.jpg" onclick="setSelectBackground('back2')" style="width:100%">
                </div>
                <div class="columnimg">
                  <img src="./backgrounds/back3.jpg" onclick="setSelectBackground('back3')" style="width:100%">
                </div>
                <div class="columnimg">
                  <img src="./backgrounds/back4.jpg" onclick="setSelectBackground('back4')" style="width:100%">
                </div>
                <div class="columnimg">
                  <img src="./backgrounds/back5.jpg" onclick="setSelectBackground('back5')" style="width:100%">
                </div>
              </div>
              <br>
              <div class="form-group">
                <select style="display:none" class="form-control selectpicker" id="backgroundImage">
                  <option value="back1">Podium1</option>
                  <option value="back2">Podium2</option>
                  <option value="back3">Podium3</option>
                  <option value="back4">Podium4</option>
                  <option value="back5">Transparant</option>
                </select>
              </div>
            </form>
            <button id="virtualBackground-Apply" class="btn btn-primary btn-sm">Apply</button>
            <button id="remove-processor" class="btn btn-primary btn-sm ">Remove </button>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel"
    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="errorModalLabel">Error</h5>
        </div>
        <div class="modal-body">
          ...
        </div>
      </div>
    </div>
  </div>


  <script src="./dist//build/twilio-video.min.js"></script>
  <script src="./dist//build/twilio-video-processors.js"></script>
  <script src="./dist//build/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <script src="./index2.js"></script>

  <script>
    var width = `80%`;
    var height = `80%`;

    document.getElementById("video-input").style.width = width;
    document.getElementById("video-input").style.height = height;

    // overlay
    height = `30%`;
    document.getElementById("overlay").style.width = width;
    document.getElementById("overlay").style.height = height;

    $('img').click(function () {
      $('.selected').removeClass('selected');
      $(this).addClass('selected');
    });
  </script>
</body>

</html>